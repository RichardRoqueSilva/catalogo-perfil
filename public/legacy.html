<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Página Legada com jQuery</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f0f0f0; }
        #user-list .list-group-item { cursor: pointer; }
        #user-list .list-group-item:hover { background-color: #e9ecef; }
    </style>
</head>
<body>
    <div class="container mt-4">
        <header class="text-center p-3 mb-4 bg-light rounded shadow-sm">
            <h1>Catálogo de Perfis (Versão jQuery)</h1>
            <p class="lead">Demonstração da mesma funcionalidade com manipulação direta do DOM.</p>
        </header>

        <div id="loading-indicator" class="text-center">
            <p>Carregando usuários...</p>
            <div class="spinner-border" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>

        <div id="error-message" class="alert alert-danger" style="display: none;"></div>

        <main class="row" style="display: none;">
            <section class="col-md-5">
                <h2 class="h4 mb-3">Lista de Usuários</h2>

                <div class="card bg-light mb-3">
                    <div class="card-body">
                        <h5 class="card-title">jQuery + Bootstrap</h5>
                        <p class="card-text small">
                            <strong>Ponto Forte:</strong> Rápido para prototipar interações simples.
                            <br>
                            <strong>Ponto Fraco:</strong> Manter dados sincronizados (como este contador)
                            exige manipulação manual do DOM.
                        </p>
                        <p>Usuários na lista: <strong id="user-counter">0</strong></p>
                    </div>
                </div>

                <ul id="user-list" class="list-group"></ul>
            </section>
            
            <section class="col-md-7">
                <h2 class="h4 mb-3">Detalhes do Usuário</h2>
                <div id="user-details-container">
                    <div class="card">
                        <div class="card-body text-center text-muted">
                            Selecione um usuário na lista para ver os detalhes.
                        </div>
                    </div>
                </div>
            </section>
        </main>
        
        <footer class="text-center mt-5 border-top pt-3">
            <p class="mb-2"><strong>Navegar para outras versões:</strong></p>
            <div>
                <a href="/" class="btn btn-primary btn-sm m-1">
                    Ver Versão React
                </a>
                <a href="/custom-css.html" class="btn btn-info btn-sm m-1 text-white">
                    Ver Versão Vanilla JS
                </a>
         
    </div>
            </div>
        </footer>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
        $(document).ready(function() {
            $.ajax({
                url: 'https://jsonplaceholder.typicode.com/users',
                method: 'GET',
                success: function(users) {
                    $('#loading-indicator').hide();
                    $('main').show();
                    
                    const userListElement = $('#user-list');
                    $.each(users, function(index, user) {
                        const listItem = $('<li></li>')
                            .addClass('list-group-item')
                            .text(user.name)
                            .data('user-data', user);
                        
                        userListElement.append(listItem);
                    });
                    
                    updateUserCounter();
                },
                error: function(err) {
                    $('#loading-indicator').hide();
                    const errorElement = $('#error-message');
                    errorElement.text('Falha ao buscar dados. Tente recarregar a página.');
                    errorElement.show();
                }
            });

            $('#user-list').on('click', 'li', function() {
                const clickedListItem = $(this);
                $('#user-list li').removeClass('active');
                clickedListItem.addClass('active');

                const userData = clickedListItem.data('user-data');
                
                const detailsHtml = `
                    <div class="card shadow-sm">
                        <div class="card-header"><h5 class="mb-0">${userData.name}</h5></div>
                        <div class="card-body">
                            <p class="card-text"><strong>Email:</strong> ${userData.email}</p>
                            <p class="card-text"><strong>Telefone:</strong> ${userData.phone}</p>
                            <p class="card-text"><strong>Website:</strong> <a href="http://${userData.website}" target="_blank" rel="noopener noreferrer">${userData.website}</a></p>
                        </div>
                    </div>`;
                $('#user-details-container').html(detailsHtml);
            });

            // --- FUNÇÃO PARA DEMONSTRAR O PONTO FRACO ---
            function updateUserCounter() {
                const count = $('#user-list li').length;
                $('#user-counter').text(count);
            }
        });
    </script>
</body>
</html>